
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D模型格式分析报告</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
        }
        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .data-table th, .data-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .data-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .data-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>3D模型格式分析报告</h1>
        
        <div class="summary-stats">
            <div class="stat-card">
                <h3>FBX 平均压缩率</h3>
                <div class="value" id="fbx-compression">-</div>
            </div>
            <div class="stat-card">
                <h3>OBJ 平均压缩率</h3>
                <div class="value" id="obj-compression">-</div>
            </div>
            <div class="stat-card">
                <h3>GLTF 平均压缩率</h3>
                <div class="value" id="gltf-compression">-</div>
            </div>
            <div class="stat-card">
                <h3>GLB 平均压缩率</h3>
                <div class="value" id="glb-compression">-</div>
            </div>
        </div>

        <div class="chart-container">
            <h2>素材大小对比（压缩前后）</h2>
            <canvas id="sizeChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h2>压缩率对比</h2>
            <canvas id="compressionChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h2>纹理占比对比</h2>
            <canvas id="textureChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h2>详细数据表格</h2>
            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>模型名称</th>
                        <th>面数</th>
                        <th>纹理数量</th>
                        <th>格式</th>
                        <th>原始大小(MB)</th>
                        <th>压缩后大小(MB)</th>
                        <th>压缩率(%)</th>
                        <th>纹理占比(%)</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // 数据
        const chartData = [{"model": "BistroExterior", "face_count": 2832000, "texture_count": 405, "format": "FBX", "original_size": 1037.0, "compressed_size": 587.0, "compression_ratio": 43.39440694310511, "texture_percentage": 89.19961427193829}, {"model": "BistroExterior", "face_count": 2832000, "texture_count": 405, "format": "OBJ", "original_size": 1220.0, "compressed_size": 551.0, "compression_ratio": 54.83606557377049, "texture_percentage": 75.81967213114754}, {"model": "BistroExterior", "face_count": 2832000, "texture_count": 405, "format": "GLTF", "original_size": 942.0, "compressed_size": 865.0, "compression_ratio": 8.174097664543524, "texture_percentage": 86.51804670912952}, {"model": "BistroExterior", "face_count": 2832000, "texture_count": 405, "format": "GLB", "original_size": 941.0, "compressed_size": 865.0, "compression_ratio": 8.076514346439957, "texture_percentage": 86.60998937300744}, {"model": "BistroInterior", "face_count": 1293000, "texture_count": 201, "format": "FBX", "original_size": 533.0, "compressed_size": 268.0, "compression_ratio": 49.71857410881801, "texture_percentage": 91.55722326454033}, {"model": "BistroInterior", "face_count": 1293000, "texture_count": 201, "format": "OBJ", "original_size": 489.0, "compressed_size": 384.0, "compression_ratio": 21.472392638036812, "texture_percentage": 73.00613496932516}, {"model": "BistroInterior", "face_count": 1293000, "texture_count": 201, "format": "GLTF", "original_size": 402.0, "compressed_size": 374.0, "compression_ratio": 6.965174129353234, "texture_percentage": 88.80597014925374}, {"model": "BistroInterior", "face_count": 1293000, "texture_count": 201, "format": "GLB", "original_size": 402.0, "compressed_size": 374.0, "compression_ratio": 6.965174129353234, "texture_percentage": 88.80597014925374}, {"model": "Dragon", "face_count": 38000, "texture_count": 0, "format": "FBX", "original_size": 2.15, "compressed_size": 1.78, "compression_ratio": 17.20930232558139, "texture_percentage": 0.0}, {"model": "Dragon", "face_count": 38000, "texture_count": 0, "format": "OBJ", "original_size": 3.13, "compressed_size": 0.95, "compression_ratio": 69.64856230031948, "texture_percentage": 0.0}, {"model": "Dragon", "face_count": 38000, "texture_count": 0, "format": "GLTF", "original_size": 1.63, "compressed_size": 0.98, "compression_ratio": 39.87730061349693, "texture_percentage": 0.0}, {"model": "Dragon", "face_count": 38000, "texture_count": 0, "format": "GLB", "original_size": 1.61, "compressed_size": 0.98, "compression_ratio": 39.1304347826087, "texture_percentage": 0.0}, {"model": "AbandonedWarehouse", "face_count": 993000, "texture_count": 36, "format": "FBX", "original_size": 92.7, "compressed_size": 87.6, "compression_ratio": 5.501618122977355, "texture_percentage": 75.08090614886731}, {"model": "AbandonedWarehouse", "face_count": 993000, "texture_count": 36, "format": "OBJ", "original_size": 157.0, "compressed_size": 86.0, "compression_ratio": 45.22292993630573, "texture_percentage": 44.331210191082796}, {"model": "AbandonedWarehouse", "face_count": 993000, "texture_count": 36, "format": "GLTF", "original_size": 100.0, "compressed_size": 75.7, "compression_ratio": 24.299999999999997, "texture_percentage": 67.1}, {"model": "AbandonedWarehouse", "face_count": 993000, "texture_count": 36, "format": "GLB", "original_size": 100.0, "compressed_size": 75.7, "compression_ratio": 24.299999999999997, "texture_percentage": 67.1}, {"model": "BurjKhalifaDubai", "face_count": 662000, "texture_count": 1, "format": "FBX", "original_size": 11.6, "compressed_size": 9.15, "compression_ratio": 21.12068965517241, "texture_percentage": 1.7327586206896555}, {"model": "BurjKhalifaDubai", "face_count": 662000, "texture_count": 1, "format": "OBJ", "original_size": 45.4, "compressed_size": 6.87, "compression_ratio": 84.86784140969164, "texture_percentage": 0.4427312775330397}, {"model": "BurjKhalifaDubai", "face_count": 662000, "texture_count": 1, "format": "GLTF", "original_size": 27.3, "compressed_size": 4.92, "compression_ratio": 81.97802197802199, "texture_percentage": 0.7362637362637363}, {"model": "BurjKhalifaDubai", "face_count": 662000, "texture_count": 1, "format": "GLB", "original_size": 27.1, "compressed_size": 4.73, "compression_ratio": 82.54612546125462, "texture_percentage": 0.7416974169741697}];
        
        // 更新统计卡片
        function updateStats() {
            const formats = ['fbx', 'obj', 'gltf', 'glb'];
            formats.forEach(format => {
                const formatData = chartData.filter(item => item.format.toLowerCase() === format);
                if (formatData.length > 0) {
                    const avgCompression = formatData.reduce((sum, item) => sum + item.compression_ratio, 0) / formatData.length;
                    document.getElementById(format + '-compression').textContent = avgCompression.toFixed(1) + '%';
                }
            });
        }
        
        // 填充数据表格
        function populateTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            chartData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.model}</td>
                    <td>${item.face_count.toLocaleString()}</td>
                    <td>${item.texture_count}</td>
                    <td>${item.format}</td>
                    <td>${item.original_size.toFixed(1)}</td>
                    <td>${item.compressed_size.toFixed(1)}</td>
                    <td>${item.compression_ratio.toFixed(1)}</td>
                    <td>${item.texture_percentage.toFixed(1)}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // 创建大小对比图
        function createSizeChart() {
            const ctx = document.getElementById('sizeChart').getContext('2d');
            
            const models = [...new Set(chartData.map(item => item.model))];
            const formats = ['FBX', 'OBJ', 'GLTF', 'GLB'];
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'];
            
            const datasets = formats.map((format, index) => {
                const originalData = models.map(model => {
                    const item = chartData.find(d => d.model === model && d.format === format);
                    return item ? item.original_size : 0;
                });
                
                const compressedData = models.map(model => {
                    const item = chartData.find(d => d.model === model && d.format === format);
                    return item ? item.compressed_size : 0;
                });
                
                return [
                    {
                        label: `${format} 原始大小`,
                        data: originalData,
                        backgroundColor: colors[index],
                        borderColor: colors[index],
                        borderWidth: 2
                    },
                    {
                        label: `${format} 压缩后大小`,
                        data: compressedData,
                        backgroundColor: colors[index] + '80',
                        borderColor: colors[index],
                        borderWidth: 2
                    }
                ];
            }).flat();
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: models,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '大小 (MB)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '各格式压缩前后大小对比'
                        }
                    }
                }
            });
        }
        
        // 创建压缩率对比图
        function createCompressionChart() {
            const ctx = document.getElementById('compressionChart').getContext('2d');
            
            const formats = ['FBX', 'OBJ', 'GLTF', 'GLB'];
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'];
            
            const avgCompression = formats.map(format => {
                const formatData = chartData.filter(item => item.format === format);
                return formatData.length > 0 ? 
                    formatData.reduce((sum, item) => sum + item.compression_ratio, 0) / formatData.length : 0;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: formats,
                    datasets: [{
                        label: '平均压缩率 (%)',
                        data: avgCompression,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '压缩率 (%)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '各格式平均压缩率对比'
                        }
                    }
                }
            });
        }
        
        // 创建纹理占比图
        function createTextureChart() {
            const ctx = document.getElementById('textureChart').getContext('2d');
            
            const formats = ['FBX', 'OBJ', 'GLTF', 'GLB'];
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'];
            
            const avgTexture = formats.map(format => {
                const formatData = chartData.filter(item => item.format === format);
                return formatData.length > 0 ? 
                    formatData.reduce((sum, item) => sum + item.texture_percentage, 0) / formatData.length : 0;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: formats,
                    datasets: [{
                        label: '平均纹理占比 (%)',
                        data: avgTexture,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '纹理占比 (%)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '各格式平均纹理占比对比'
                        }
                    }
                }
            });
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            populateTable();
            createSizeChart();
            createCompressionChart();
            createTextureChart();
        });
    </script>
</body>
</html>
        